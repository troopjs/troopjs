/*!
 *   ____ .     ____  ____  ____    ____.
 *   \   (/_\___\  (__\  (__\  (\___\  (/
 *   / ._/  ( . _   \  . /   . /  . _   \_
 * _/    ___/   /____ /  \_ /  \_    ____/
 * \   _/ \____/   \____________/   /
 *  \_t:_____r:_______o:____o:___p:/ [ troopjs - 3.0.0-rc+726cd7f ]
 *
 * @license http://troopjs.mit-license.org/ Â© Mikael Karon, Garry Yao, Eyal Arubas
 */
define("troopjs/version",[],{toString:function(){return"3.0.0-rc+726cd7f"}}),define("troopjs-compose/decorator",[],function(){return function(a){Object.defineProperties(this,{decorate:{value:a}})}}),define("troopjs-compose/decorator/after",["../decorator"],function(a){var b,c="value";return function(d){return new a(function(a){var e=a[c];return a[c]=e?function(){var a=this,c=e.apply(a,arguments),f=d.apply(a,arguments);return f!==b?f:c}:d,a})}}),define("troopjs-compose/decorator/around",["../decorator"],function(a){var b="value",c=function(){};return function(d){return new a(function(a){return a[b]=d(a[b]||c),a})}}),define("troopjs-compose/decorator/before",["../decorator"],function(a){var b,c="value";return function(d){return new a(function(a){var e=a[c];return a[c]=e?function(){var a=this,c=d.apply(a,arguments);return e.apply(a,c!==b?c:arguments)}:d,a})}}),define("troopjs-compose/decorator/extend",["../decorator","mu-merge/main"],function(a,b){var c,d="value",e=Array.prototype.concat;return function(f){var g=arguments;return new a(function(a,h,i){var j,k=i[h][d];return"function"==typeof f?j=f(k):k!==c&&(j=b.apply({},e.apply([k],g))),a[d]=j,a})}}),define("troopjs-compose/decorator/from",["../decorator"],function(a){var b,c="value",d="prototype";return function(e,f){return"string"==typeof e&&(f=e,e=b),new a(function(a,b,g){return b=f||b,a[c]=e?e[d][b]:g[b][c],a})}}),define("troopjs-compose/config",["module","mu-merge/main"],function(a,b){return b.call({pragmas:[],specials:/^([^\/]+)\/(.+?)(?:\((.*)\))?$/},a.config())}),define("troopjs-core/config",["module","troopjs-compose/config","mu-emitter/config","mu-merge/main"],function(a,b,c,d){var e={skip:/^(?:initi|fin)alized?$/,initialize:"initialize",initialized:"initialized",start:"start",started:"started",stop:"stop",stopped:"stopped",finalize:"finalize",finalized:"finalized"},f={setup:"sig/setup",add:"sig/add",added:"sig/added",remove:"sig/remove",removed:"sig/removed",teardown:"sig/teardown",initialize:"sig/initialize",start:"sig/start",stop:"sig/stop",finalize:"sig/finalize",register:"sig/register",unregister:"sig/unregister",task:"sig/task"};return d.call({},b,{signal:f,phase:e,emitter:c},a.config())}),define("troopjs-core/component/signal/initialize",["../../config","when/when"],function(a,b){var c,d=Array.prototype.push,e="phase",f=a.phase.initialize,g=a.phase.initialized,h=a.signal.initialize;return function(){var a=this,i=arguments;return b(a[e],function(b){var j;return b===c?(a[e]=f,d.apply(j=[h],i),a.emit.apply(a,j).then(function(){return a[e]=g})):b})}}),define("troopjs-core/component/signal/start",["./initialize","../../config","when/when"],function(a,b,c){var d=Array.prototype.push,e="phase",f=b.phase.initialized,g=b.phase.start,h=b.phase.started,i=b.signal.start;return function(){var b=this,j=arguments;return c(a.apply(b,j),function(a){var c;return a===f?(b[e]=g,d.apply(c=[i],j),b.emit.apply(b,c).then(function(){return b[e]=h})):a})}}),define("troopjs-core/component/signal/stop",["./start","../../config","when/when"],function(a,b,c){var d=Array.prototype.push,e="phase",f=b.phase.started,g=b.phase.stop,h=b.phase.stopped,i=b.signal.stop;return function(){var b=this,j=arguments;return c(a.apply(b,j),function(a){var c;return a===f?(b[e]=g,d.apply(c=[i],j),b.emit.apply(b,c).then(function(){return b[e]=h})):a})}}),define("troopjs-core/component/signal/finalize",["./stop","../../config","when/when"],function(a,b,c){var d=Array.prototype.push,e="phase",f=b.phase.stopped,g=b.phase.finalize,h=b.phase.finalized,i=b.signal.finalize;return function(){var b=this,j=arguments;return c(a.apply(b,j),function(a){var c;return a===f?(b[e]=g,d.apply(c=[i],j),b.emit.apply(b,c).then(function(){return b[e]=h})):a})}}),define("troopjs-compose/factory",["./config","./decorator","mu-getargs/main"],function(a,b,c){function d(){return e.apply(this,arguments)()}function e(){var a=[this];return n.apply(a,arguments),h.apply(j,a)}function f(){var a,b,c,d,e,f=this;a:for(b=d=0,e=f[t];e>b;b++){for(a=f[b],c=0;b>c;c++)if(a===f[c])continue a;f[d++]=a}return f[t]=d}function g(){var a=this,b=a[k];return s in b?b[s]:q.call(a)}function h(){function a(){var b,c=this instanceof a?this:Object.create(ba),d=arguments;for(Object.defineProperty(c,x,{value:a}),b=0;I>b;b++)d=_[b].apply(c,d)||d;return c}var h,m,s,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y=[],Z=p.call(arguments),$=Z[t],_=[],aa=Y[E]=[],ba={},ca={},da={};for(N=0;$>N;N++){if(s=Z[N],typeof s===r){if(y in s?n.apply(_,s[y]):n.call(_,s),z in s&&o.apply(Y,s[z]),s===s[k][x])continue;s=s[k]}for(L=Object.getOwnPropertyNames(s),O=0,M=L[t];M>O;O++){for(J=K=L[O],P=0;P<G[t]&&(Q=G[P],(J=J.replace(Q.pattern,typeof(R=Q.replace)===r?R.bind(s):R))===K);P++);if((V=H.exec(J))!==j){if(h={},h[A]=S=V[1],(U=V[2])!==i&&(h[D]=U),h[F]=S+(U?"/"+U:""),h[C]=c.call(V[3]||""),"[object Function]"!==q.call(h[B]=s[K]))continue;o.call(Y,h)}else X=Object.getOwnPropertyDescriptor(s,K),W=X[B],ca[J]=W instanceof b?W[w](ca[J]||{enumerable:!0,configurable:!0,writable:!0},J,ca):X}}for(Object.defineProperties(ba,ca),I=f.call(_),m=f.call(Y),N=0;m>N;N++)h=Y[N],S=h[A],U=h[D],J=h[F],S=S in Y?Y[S]:Y[aa[aa[t]]=S]=[],U&&(T=E in S?S[E]:S[E]=[],U=U in S?S[U]:S[T[T[t]]=U]=Y[J]=[],U[U[t]]=h),S[S[t]]=h;return da[k]={value:ba},da[y]={value:_},da[z]={value:Y},da[l]={value:g},da[u]={value:e},da[v]={value:d},Object.defineProperties(a,da),a}var i,j=null,k="prototype",l="toString",m=Array[k],n=m.push,o=m.unshift,p=m.slice,q=Object[k][l],r="function",s="displayName",t="length",u="extend",v="create",w="decorate",x="constructor",y="constructors",z="specials",A="group",B="value",C="args",D="type",E="types",F="name",G=a.pragmas,H=a[z];return Object.defineProperty(h,v,{value:function(){return h.apply(j,arguments)()}}),h}),define("troopjs-core/composition",["troopjs-compose/factory"],function(a){var b=0,c="instanceCount";return a(function(){this[c]=++b},{displayName:"core/composition",toString:function(){var a=this;return a.displayName+"@"+a[c]}})}),define("troopjs-core/emitter/executor",["../config","when/when"],function(a,b){var c,d=a.emitter.callback,e=a.emitter.scope,f=a.emitter.head,g=a.emitter.next;return function(a,h,i){var j,k=[],l=0,m=a[d],n=a[e];for(j=h[f];j!==c;j=j[g])m&&j[d]!==m||n&&j[e]!==n||(k[l++]=j);return b.reduce(k,function(a,c,d){return b(c.handle(i),function(b){a[d]=b})["yield"](a)},k)}}),define("troopjs-core/emitter/composition",["mu-emitter/main","../composition","../config","./executor","troopjs-compose/decorator/from","when/when"],function(a,b,c,d,e){var f=c.emitter.executor,g=c.emitter.handlers;return b.extend(function(){this[g]={}},function(a,b){var c=this;return c[a]=b,c}.call({displayName:"core/emitter/composition",on:e(a),off:e(a),one:e(a),emit:e(a)},f,d))}),define("troopjs-core/component/executor",["../config"],function(a){var b,c=!1,d=a.emitter.head,e=a.emitter.next,f=a.emitter.callback,g=a.emitter.scope;return function(a,h,i){var j,k=[],l=0,m=a[g],n=a[f];for(j=h[d];j!==b;j=j[e])n&&j[f]!==n||m&&j[g]!==m||(k[l++]=j);return k.reduce(function(a,d){var e=a!==c?d.handle(i):a;return e===b?a:e},b)}}),define("troopjs-core/registry/emitter",["../emitter/composition","../config","../component/executor"],function(a,b,c){var d="length",e="index",f=Object.prototype.toString,g="[object RegExp]",h=b.signal.register,i=b.signal.unregister,j=b.emitter.executor;return a.extend(function(){this[e]={}},function(a,b){var c=this;return c[a]=b,c}.call({displayName:"core/registry/emitter",get:function(a){var b,c=this[e];return b=0===arguments[d]?Object.keys(c).map(function(a){return c[a]}):f.call(a)===g?Object.keys(c).filter(function(b){return a.test(b)}).map(function(a){return c[a]}):c[a]},register:function(a,b){var c=this,d=c[e];return d[a]!==b&&(d.hasOwnProperty(a)&&c.unregister(a),c.emit(h,a,d[a]=b)),b},unregister:function(a){var b,c=this,d=c[e];return d.hasOwnProperty(a)&&(b=d[a],delete d[a]&&c.emit(i,a,b)),b}},j,c))}),define("troopjs-core/component/registry",["../registry/emitter"],function(a){return a.create({displayName:"core/component/registry"})}),define("troopjs-core/task/registry",["../registry/emitter"],function(a){return a.create({displayName:"core/task/registry"})}),define("troopjs-core/task/factory",["./registry","when/when"],function(a,b){var c=0;return function(d,e){var f=b.isPromiseLike(d)?b(d):b.promise(d),g=(e||"task")+"@"+ ++c;return a.register(g,f.ensure(function(){a.unregister(g)}))}}),define("troopjs-core/component/emitter",["../emitter/composition","../config","./registry","./executor","../task/factory","mu-merge/main","troopjs-compose/decorator/around"],function(a,b,c,d,e,f,g){var h,i=!1,j=b.emitter.executor,k=b.emitter.handlers,l=b.emitter.head,m=b.emitter.tail,n=b.signal.setup,o=b.signal.add,p=b.signal.added,q=b.signal.remove,r=b.signal.removed,s=b.signal.teardown,t=b.signal.task,u="phase",v="name",w="type",x="value",y="on",z="one",A="sig",B=new RegExp("^"+A+"/(.+)");return a.extend(function(){var a=this,b=a.constructor.specials;a[u]=h,b.hasOwnProperty(A)&&b[A].forEach(function(b){a.on(b[v],b[x])})},{displayName:"core/component/base","sig/initialize":function(){var a=this,b=a.constructor.specials;c.register(a.toString(),a),b.hasOwnProperty(y)&&b[y].forEach(function(b){a.on(b[w],b[x])}),b.hasOwnProperty(z)&&b[z].forEach(function(b){a.one(b[w],b[x])})},"sig/finalize":function(){var a=this;c.unregister(a.toString(),a),Object.keys(a[k]).forEach(function(b){a.off(b)})},on:g(function(a){return function(b,c,e){var f,g,h,m=this,q=m[k];return B.test(b)?g=a.call(m,b,c,e):(q.hasOwnProperty(b)?h=q[b]:(h={},h[w]=b),f={},f[j]=d,h.hasOwnProperty(l)||(f[w]=n,g=m.emit(f,h,b,c,e)),g!==i&&(f[w]=o,g=m.emit(f,h,b,c,e),g!==i&&(q.hasOwnProperty(b)||(q[b]=h),g=a.call(m,b,c,e),f[w]=p,m.emit(f,h,g)))),g}}),off:g(function(a){return function(b,c){var e,f,g,h=this,n=h[k];return B.test(b)?f=a.call(h,b,c):(n.hasOwnProperty(b)?g=n[b]:(g={},g[w]=b),e={},e[j]=d,e[w]=q,f=h.emit(e,g,b,c),f!==i&&(g[l]===g[m]&&(e[w]=s,f=h.emit(e,g,b,c)),f!==i&&(n.hasOwnProperty(b)||(n[b]=g),f=a.call(h,b,c),e[w]=r,f.forEach(function(a){h.emit(e,g,a)})))),f}}),task:function(a,b){var c=this,d=e.call(c,a,b);return c.emit(t,d,b)["yield"](d)}})}),define("troopjs-hub/config",["troopjs-core/config","module","mu-merge/main"],function(a,b,c){var d={memory:"memory"};return c.call({},a,{emitter:d},b.config())}),define("troopjs-hub/executor",["./config","when/when"],function(a,b){var c,d=Object.prototype.toString,e=Array.prototype.slice,f="[object Arguments]",g="[object Array]",h=a.phase.skip,i=a.emitter.scope,j=a.emitter.callback,k=a.emitter.head,l=a.emitter.next,m=a.emitter.memory,n="phase";return function(a,o,p){var q,r=[],s=0,t=a[i],u=a[j];for(q=o[k];q!==c;q=q[l])u&&q[j]!==u||t&&q[i]!==t||(r[s++]=q);return b.reduce(r,function(a,j){var k=j[i];return k.hasOwnProperty(n)&&(k[n]===c||h.test(k[n]))?a:b(j.handle(a),function(b){if(b===c)return a;switch(d.call(b)){case f:return e.call(b);case g:return b;default:return[b]}})},p).tap(function(a){o[m]=a})}}),define("troopjs-hub/emitter",["troopjs-core/emitter/composition","./config","./executor"],function(a,b,c){var d,e=b.emitter.memory,f=b.emitter.handlers,g=b.emitter.executor;return a.create(function(a,b){var c=this;return c[a]=b,c}.call({displayName:"hub/emitter",peek:function(a,b){var c;return(c=this[f][a])!==d&&c.hasOwnProperty(e)?c[e]:b}},g,c))}),define("troopjs-hub/component",["troopjs-core/component/emitter","./config","./emitter","when/when"],function(a,b,c,d){var e,f=null,g=!0,h=b.emitter.data,i="args",j="name",k="type",l="value",m="hub",n=new RegExp("^"+m+"/(.+)");return a.extend(function(){var a=this,b=[];a.on("sig/added",function(d,i){var j,l,o,p={};(j=n.exec(i[k]))!==f&&(l=j[1],i[m]=l,c.on(l,i),i[h]===g&&(b!==e?b.push(i):(o=c.peek(l,p))!==p&&a.emit.apply(a,[i].concat(o))))}),a.on("sig/removed",function(a,d){var i;(i=n.exec(d[k]))!==f&&(c.off(i[1],d),d[h]===g&&b!==e&&(b=b.filter(function(a){return a!==d})))}),a.on("sig/start",function(){return d.map(b,function(b){var d,f={};return(d=c.peek(b[m],f))!==f?a.emit.apply(a,[b].concat(d)):e}).tap(function(){b=e})})},{displayName:"hub/component","sig/initialize":function(){var a=this,b=a.constructor.specials;b.hasOwnProperty(m)&&b[m].forEach(function(b){a.on(b[j],b[l],b[i][0])})}})}),define("troopjs-dom/config",["troopjs-core/config","module","mu-merge/main"],function(a,b,c){var d={render:"sig/render"};return c.call({},a,{signal:d},b.config())}),define("troopjs-dom/executor",["mu-selector-set/main","jquery"],function(a,b){function c(a){return a[1]}var d,e=!1,f=0;return a.prototype.matchesSelector=b.find.matchesSelector,function(a,b,g){function h(a,b){return l.isImmediatePropagationStopped()?a:(a===e&&(l.stopPropagation(),l.preventDefault()),b.handle(g))}var i=d,j=b.direct,k=b.delegated,l=g[0],m=l.delegateTarget,n=l.target,o=n.ownerDocument,p="click"!==l.type,q=n.nodeType!==d&&(l.button===f||p);do(n.disabled!==!0||p)&&(i=k.matches(l.currentTarget=n).map(c).reduce(h,i)),q=q&&!l.isPropagationStopped()&&n!==m&&null!==(n=n.parentNode)&&n!==o;while(q);return i!==e&&(i=j.reduce(h,i)),i}}),define("troopjs-dom/error",["mu-error/factory"],function(a){return a("DOMError")}),define("troopjs-dom/component",["troopjs-core/component/emitter","./config","./executor","./error","troopjs-compose/decorator/before","jquery","when/when","mu-selector-set/main","mu-jquery-destroy/main"],function(a,b,c,d,e,f,g,h){function i(a,b,c){var d=this,e=c[o];return g(c[0],function(b){var d,f;if(l.call(b)!==m)return b;for(d=e,f=new Array(d-1);d-->1;)f[d-1]=c[d];return b.apply(a,f)}).then(function(g){var h=c[0]=f(g),i=e,j=new Array(i+1);for(j[0]=A;i-->0;)j[i+1]=c[i];switch(b){case"appendTo":case"prependTo":h[b](a);break;default:a[b](h)}return d.emit.apply(d,j)["yield"](c)})}var j,k=null,l=Object.prototype.toString,m="[object Function]",n="$element",o="length",p="proxy",q="dom",r="args",s="name",t="value",u=b.emitter.type,v=b.emitter.executor,w=b.emitter.scope,x=b.emitter.data,y="direct",z="delegated",A=b.signal.render,B=new RegExp("^"+q+"/(.+)");return a.extend(function(a,b){var c,e=this,g=arguments[o],h=new Array(g);if(a===j||a===k)throw new d("No '$element' provided");for(;g-->0;)h[g]=arguments[g];return a.jquery?(c=a.get)!==f.fn.get&&(h[0]=a=f(c.call(a,0))):h[0]=a=f(a),e[n]=a,b!==j&&(e.displayName=b),h},{displayName:"dom/component","sig/initialize":function(){var a=this,b=a.constructor.specials;b.hasOwnProperty(q)&&b[q].forEach(function(b){a.on(b[s],b[t],b[r][0])})},"sig/setup":function(a,b){var d,e=this;(d=B.exec(b))!==k&&(a[y]=[],a[z]=new h,e[n].on(d[1],k,e,a[p]=function(){var a=arguments[o],d=new Array(a+1),f=d[0]={};for(f[u]=b,f[v]=c,f[w]=e;a>0;)d[a]=arguments[--a];return e.emit.apply(e,d)}))},"sig/added":function(a,b){var c;B.test(b[u])&&(c=b[x],c!==j?a[z].add(c,b):a[y].push(b))},"sig/teardown":function(a,b){var c,d=this;(c=B.exec(b))!==k&&d[n].off(c[1],k,a[p])},"sig/removed":function(a,b){var c;B.test(b[u])&&(c=b[x],c!==j?a[z].remove(c,b):a[y]=a[y].filter(function(a){return a!==b}))}},["html","text"].reduce(function(a,b){return a[b]=function(){var a,c,d=this,e=d[n],f=arguments[o];if(0===f)c=e[b]();else{for(a=new Array(f);f-->0;)a[f]=arguments[f];c=i.call(d,e,b,a)}return c},a},{}),["before","after","append","prepend"].reduce(function(a,b){return a[b]=function(){for(var a=this,c=arguments[o],d=new Array(c);c-->0;)d[c]=arguments[c];return i.call(a,a[n],b,d)},a},{}),["appendTo","prependTo"].reduce(function(a,b){return a[b]=function(a){for(var c=arguments[o],d=new Array(c-1);c-->1;)d[c-1]=arguments[c];return i.call(this,a,b,d)},a},{}))}),define(["troopjs/version"],function(a){return a});