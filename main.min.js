/**
 *   ____ .     ____  ____  ____    ____.
 *   \   (/_\___\  (__\  (__\  (\___\  (/
 *   / ._/  ( . _   \  . /   . /  . _   \_
 * _/    ___/   /____ /  \_ /  \_    ____/
 * \   _/ \____/   \____________/   /
 *  \_t:_____r:_______o:____o:___p:/ [ troopjs - 3.0.0-pr.4+158353c ]
 *
 * @license http://troopjs.mit-license.org/ Â© Mikael Karon, Garry Yao, Eyal Arubas
 */

define("troopjs/version",[],{toString:function(){return"3.0.0-pr.4+158353c"}}),define("troopjs-compose/mixin/decorator",["poly/object"],function(){return function(a){Object.defineProperties(this,{decorate:{value:a}})}}),define("troopjs-compose/decorator/after",["../mixin/decorator"],function(a){var b,c="value";return function(d){return new a(function(a){var e=a[c];return a[c]=e?function(){var a=this,c=e.apply(a,arguments),f=d.apply(a,arguments);return f!==b?f:c}:d,a})}}),define("troopjs-compose/decorator/around",["../mixin/decorator"],function(a){var b="value",c=function(){};return function(d){return new a(function(a){return a[b]=d(a[b]||c),a})}}),define("troopjs-compose/decorator/before",["../mixin/decorator"],function(a){var b,c="value";return function(d){return new a(function(a){var e=a[c];return a[c]=e?function(){var a=this,c=d.apply(a,arguments);return e.apply(a,c!==b?c:arguments)}:d,a})}}),define("mu-merge/main",["poly/object"],function(){var a,b=null,c=Array.prototype,d=c.concat,e=Object.prototype,f=e.toString,g=f.call(e),h=f.call(c),i="length";return function j(c){var e,k,l,m,n,o,p,q,r,s,t=this;if(t!==a&&t!==b)for(l=0,n=arguments[i];n>l;l++)if((c=arguments[l])!==a&&c!==b)for(k=Object.keys(c),m=0,o=k[i];o>m;m++)e=k[m],p=c[e],q=t[e],e in t?(r=f.call(p),s=f.call(q),s===g&&r===g?j.call(q,p):t[e]=s===h&&r===h?d.call(q,p):p):t[e]=p;return t}}),define("mu-merge",["mu-merge/main"],function(a){return a}),define("troopjs-compose/decorator/extend",["../mixin/decorator","mu-merge"],function(a,b){var c,d="value",e=Array.prototype.concat;return function(f){var g=arguments;return new a(function(a,h,i){var j,k=i[h][d];return"function"==typeof f?j=f(k):k!==c&&(j=b.apply({},e.apply([k],g))),a[d]=j,a})}}),define("troopjs-compose/decorator/from",["../mixin/decorator"],function(a){var b,c="value",d="prototype";return function(e,f){return"string"==typeof e&&(f=e,e=b),new a(function(a,b,g){return b=f||b,a[c]=e?e[d][b]:g[b][c],a})}}),define("troopjs-log/sink/methods",[],function(){return["assert","debug","dir","error","info","log","time","timeEnd","trace","warn"]}),define("troopjs-log/sink/console",["./methods","poly/array","poly/function"],function(a){return function(b){var c=this,d=function(){};return a.forEach(function(a){c[a]=this.call(b[a]||d,b)},Function.prototype.bind),c}.call({},(this||window).console||{})}),define("troopjs-log/config",["module","mu-merge"],function(a,b){return b.call({sinks:[]},a.config())}),define("troopjs-log/sink/forward",["./methods","../config","poly/array"],function(a,b){var c=Function.apply,d=Array.prototype.slice,e=b.sinks;return function(){var b=this,f=function(a){var f=d.call(arguments,1);e.forEach(function(d){c.call(d[a],b,f)})};return a.forEach(function(a){b[a]=f.bind(b,a)}),b}.call({})}),define("troopjs-log/sink/null",["./methods","poly/array"],function(a){return function(){var b=this,c=function(){};return a.forEach(function(a){b[a]=c}),b}.call({})}),define("troopjs-compose/mixin/config",["module","mu-merge"],function(a,b){return b.call({pragmas:[],specialsPattern:/^([^\/]+)(?:\/(.+?))?\((.*)\)$/},a.config())}),function(){function a(){return function(a,b){Array.prototype.sort.call(a,b)}}if("function"==typeof define&&define.amd)define("mu-unique/src/sorter",[],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a()}}(),function(){function a(a){function b(a,b){return a>b?1:b>a?-1:0}function c(a,b){return a===b}function d(a,b){var c=0,d=1,e=a.length;if(!(2>e)){for(;e>c;)0!==b(a[c],a[d-1])&&(a[d]=a[c],d++),c++;a.length=d}}function e(a,b){for(var c,d=0,e=a.length;e>d;){for(c=d+1;e>c;)b(a[d],a[c])&&(a[c--]=a[--e]),c++;d++}a.length=e}var f=!1;return function(){var g,h,i,j=Array.prototype.slice.call(arguments,0);if(0===j.length&&j.push(this),1===j.length&&("[object Array]"!==Object.prototype.toString.call(j[0])?j.unshift(this):j.push(f)),2===j.length&&("[object Array]"!==Object.prototype.toString.call(j[0])?j.unshift(this):j[1]===!0?j.push(b):j[1]===!1?j.push(c):(j[2]=j[1],j[1]=f)),g=j[0],h=j[1],i=j[2],"[object Array]"!==Object.prototype.toString.call(g))throw Error("'arr' must be an array");if(h!==!0&&h!==!1)throw Error("'sortable' must be a boolean");if("function"!=typeof i)throw Error("'comparator' must be a function");return h?(a(g,i),d(g,i)):e(g,i),g.length}}if("function"==typeof define&&define.amd)define("mu-unique/src/unique",["./sorter"],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a(require("./sorter"))}}(),function(){function a(a){return a}if("function"==typeof define&&define.amd)define("mu-unique/main",["./src/unique"],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a(require("./src/unique"))}}(),define("mu-unique",["mu-unique/main"],function(a){return a}),function(){function a(){var a,b=String.prototype.substring,c=String.prototype.slice,d=/^(["']).*\1$/,e=/^(?:false|true)$/i,f=/^true$/i,g=/^\d+$/;return function(h){function i(i,j){if(i!==j){var k=b.call(h,i,j);d.test(k)?k=c.call(k,1,-1):e.test(k)?k=f.test(k):g.test(k)&&(k=+k),p.push(k),n!==a&&(p[n]=k,n=a)}}if(h=h||this,!("string"==typeof h||h instanceof String))throw Error("First argument must be a string");var j,k,l,m,n,o,p=[],q=!1;for(l=j=k=0,m=h.length;m>l;l++)switch(o=h.charAt(l)){case'"':case"'":q===o?(q=!1,k=l+1):q===!1&&(q=o,j=k=l);break;case" ":case"	":if(q){k=l+1;break}j===k&&(j=k=l+1);break;case"=":if(q){k=l+1;break}j!==k&&(n=b.call(h,j,k),d.test(n)&&(n=c.call(n,1,-1))),j=l+1;break;case",":if(q){k=l+1;break}i(j,k),j=k=l+1;break;default:k=l+1}return i(j,k),p}}if("function"==typeof define&&define.amd)define("mu-getargs/src/getargs",[],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a()}}(),function(){function a(a){return a}if("function"==typeof define&&define.amd)define("mu-getargs/main",["./src/getargs"],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a(require("./src/getargs"))}}(),define("mu-getargs",["mu-getargs/main"],function(a){return a}),define("troopjs-compose/mixin/factory",["./config","./decorator","mu-unique","mu-getargs","poly/object"],function(a,b,c,d){function e(){return f.apply(this,arguments)()}function f(){var a=[this];return l.apply(a,arguments),h.apply(null,a)}function g(){var a=this,b=a[i];return q in b?b[q]:o.call(a)}function h(){function a(){var b,c=this instanceof a?this:Object.create($),d=arguments;for(Object.defineProperty(c,v,{value:a}),b=0;G>b;b++)d=Y[b].apply(c,d)||d;return c}var h,k,q,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=[],W=n.call(arguments),X=W[r],Y=[],Z=V[C]=[],$={},_={},ab={};for(L=0;X>L;L++){if(q=W[L],typeof q===p){if(w in q?l.apply(Y,q[w]):l.call(Y,q),x in q&&m.apply(V,q[x]),q===q[i][v])continue;q=q[i]}for(J=Object.getOwnPropertyNames(q),M=0,K=J[r];K>M;M++){for(H=I=J[M],N=0;N<E[r]&&(O=E[N],(H=H.replace(O.pattern,O.replace))===I);N++);if(S=F.exec(H)){if(h={},h[y]=P=S[1],(R=S[2])&&(h[B]=R),h[D]=P+(R?"/"+R:""),h[A]=d.call(S[3]||""),"[object Function]"!==o.call(h[z]=q[I]))continue;m.call(V,h)}else U=Object.getOwnPropertyDescriptor(q,I),T=U[z],_[H]=T instanceof b?T[u](_[H]||{enumerable:!0,configurable:!0,writable:!0},H,_):U}}for(Object.defineProperties($,_),G=c.call(Y),k=c.call(V),L=0;k>L;L++)h=V[L],P=h[y],R=h[B],H=h[D],P=P in V?V[P]:V[Z[Z[r]]=P]=[],R&&(Q=C in P?P[C]:P[C]=[],R=R in P?P[R]:P[Q[Q[r]]=R]=V[H]=[],R[R[r]]=h),P[P[r]]=h;return ab[i]={value:$},ab[w]={value:Y},ab[x]={value:V},ab[j]={value:g},ab[s]={value:f},ab[t]={value:e},Object.defineProperties(a,ab),a}var i="prototype",j="toString",k=Array[i],l=k.push,m=k.unshift,n=k.slice,o=Object[i][j],p="function",q="displayName",r="length",s="extend",t="create",u="decorate",v="constructor",w="constructors",x="specials",y="group",z="value",A="args",B="type",C="types",D="name",E=a.pragmas,F=a.specialsPattern;return Object.defineProperty(h,t,{value:function(){return h.apply(null,arguments)()}}),h}),define("troopjs-log/logger",["./sink/console"],function(a){return a}),define("troopjs-core/mixin/base",["troopjs-compose/mixin/factory","troopjs-log/logger"],function(a,b){var c=0,d="instanceCount";return a(function(){this[d]=++c},b,{instanceCount:c,displayName:"core/mixin/base",toString:function(){var a=this;return a.displayName+"@"+a[d]}})}),define("troopjs-core/event/runner/sequence",["when"],function(a){var b,c="head",d="next",e="context";return function(f,g,h){var i,j=[],k=0;for(i=g[c];i!==b;i=i[d])j[k++]=i;return a.reduce(j,function(b,c,d){return a(c.apply(c[e],h),function(a){b[d]=a}).yield(b)},j)}}),define("troopjs-core/event/emitter",["../mixin/base","./runner/sequence"],function(a,b){function c(a,b,c){var d=this,e=0,g=function(){var c=g[s],f=g[n].apply(this,arguments);return 0!==c&&++e>=c&&d.off(a,b),f};return f.call(b)===h?(g[n]=b,g[m]=d,g[s]=0):(g[n]=b[n],g[m]=b[m]||d,g[s]=b[s]||0,b.hasOwnProperty(t)&&(g[t]=b[t]),b.hasOwnProperty(u)&&(g[u]=b[u])),g[o]=c,g}var d,e=Array.prototype.slice,f=Object.prototype.toString,g="[object String]",h="[object Function]",i="handlers",j="length",k="type",l="runner",m="context",n="callback",o="data",p="head",q="tail",r="next",s="limit",t="on",u="off";return a.extend(function(){this[i]=[]},{displayName:"core/event/emitter",on:function(a,b,e){var f,g,h=this;if(b===d)throw new Error("no callback provided");return g=c.call(h,a,b,e),(f=h[i][a])!==d?f[q]=q in f?f[q][r]=g:f[p]=g:(f=h[i],f=f[f[j]]=f[a]={},f[k]=a,f[p]=f[q]=g),g.hasOwnProperty(t)&&g[t].call(h,g,f),h},off:function(a,b){var c,e,g,j,k,l,o=this;if((g=o[i][a])!==d&&p in g){for(f.call(b)===h?(c=b,e=o):b!==d&&(c=b[n],e=b[m]),j=g[p];j!==d;j=j[r])e&&j[m]!==e||c&&j[n]!==c?k?l=l[r]=j:k=l=j:j.hasOwnProperty(u)&&j[u].call(o,j,g);k&&l?(g[p]=k,g[q]=l,delete l[r]):(delete g[p],delete g[q])}return o},one:function(a,b,c){var d,e=this;return f.call(b)===h?(d={},d[n]=b,d[s]=1):(d=b,d[s]=1),e.on(a,d,c)},emit:function(a){var c,h,m=this,n=a;if(f.call(a)===g)a={},a[l]=h=b,a[k]=n;else{if(!(k in a))throw Error("first argument has to be of type '"+g+"' or have a '"+k+"' property");a[l]=h=a[l]||b,n=a[k]}return(c=m[i][n])===d&&(c=m[i],c=c[c[j]]=c[n]={},c[k]=n),h.call(m,a,c,e.call(arguments,1))}})}),define("troopjs-core/component/runner/sequence",["poly/array"],function(){var a,b=!1,c="head",d="next",e="callback",f="context";return function(g,h,i){var j,k=g[f],l=g[e],m=[],n=0;for(j=h[c];j!==a;j=j[d])k!==a&&j[f]!==k||l!==a&&j[e]!==l||(m[n++]=j);return m.reduce(function(c,d){var e=c!==b?d.apply(d[f],i):c;return e===a?c:e},a)}}),define("troopjs-core/component/signal/initialize",["when"],function(a){var b,c=Array.prototype.push,d="phase";return function(){var e=this,f=arguments;return a(e[d],function(a){var g;return a===b?(c.apply(g=[e[d]="initialize"],f),e.signal.apply(e,g).then(function(){return e[d]="initialized"})):a})}}),define("troopjs-core/component/signal/start",["./initialize","when"],function(a,b){var c=Array.prototype.push,d="phase";return function(){var e=this,f=arguments;return b(a.apply(e,f),function(a){var b;return"initialized"===a?(c.apply(b=[e[d]="start"],f),e.signal.apply(e,b).then(function(){return e[d]="started"})):a})}}),define("troopjs-core/component/signal/stop",["./start","when"],function(a,b){var c=Array.prototype.push,d="phase";return function(){var e=this,f=arguments;return b(a.apply(e,f),function(a){var b;return"started"===a?(c.apply(b=[e[d]="stop"],f),e.signal.apply(e,b).then(function(){return e[d]="stopped"})):a})}}),define("troopjs-core/component/signal/finalize",["./stop","when"],function(a,b){var c=Array.prototype.push,d="phase";return function(){var e=this,f=arguments;return b(a.apply(e,f),function(a){var b;return"stopped"===a?(c.apply(b=[e[d]="finalize"],f),e.signal.apply(e,b).then(function(){return e[d]="finalized"})):a})}}),define("troopjs-core/registry/component",["../mixin/base","poly/array"],function(a){var b,c="length",d="index",e="key",f="value",g="index_key",h="index_pos",i=Object.prototype.toString,j="[object String]",k="[object RegExp]";return a.extend(function(){this[g]={},this[h]=[]},{displayName:"core/registry/component",access:function(a,l){var m,n,o=this[g],p=this[h];if(0===(n=arguments[c]))m=p.map(function(a){return a[f]});else if(i.call(a)===k&&l===b)m=Object.keys(o).filter(function(b){return a.test(b)}).map(function(a){return o[a][f]});else if(m=("number"==typeof a?p:o)[a],1===n)m=m!==b?m[f]:b;else if(m!==b)m=m[f]=l;else{if(i.call(a)!==j)throw Error("key has to be of type String");m={},m=o[m[e]=a]=p[m[d]=p[c]]=m,m=m[f]=l}return m},remove:function(a){var f,i=this,j=i[g],k=i[h];0===arguments[c]?(i[g]={},i[h]=[]):(f=j[a])!==b&&(delete j[f[e]],delete k[f[d]])},compact:function(){}})}),define("troopjs-core/pubsub/runner/pattern",[],function(){return/^(?:initi|fin)alized?$/}),define("troopjs-core/pubsub/runner/pipeline",["./pattern","when"],function(a,b){var c,d=Function.prototype,e=d.apply,f=d.call,g=Object.prototype.toString,h="[object Arguments]",i="[object Array]",j=Array.prototype.slice,k="context",l="callback",m="head",n="next",o="phase",p="memory";return function(d,q,r){var s,t=d[k],u=d[l],v=[],w=0;for(s=q[m];s!==c;s=s[n])t!==c&&s[k]!==t||u!==c&&s[l]!==u||(v[w++]=s);return b.reduce(v,function(d,j){var l=j[k];if(l!==c&&a.test(l[o]))return d;var m=g.call(d),n=m===i||m===h?e:f;return b(n.call(j,l,d),function(a){return a===c?d:a})},r).then(function(a){var b=g.call(a);return q[p]=b===i?a:b===h?j.call(a):[a]})}}),define("troopjs-core/pubsub/hub",["../event/emitter","./runner/pipeline","troopjs-compose/decorator/from"],function(a,b,c){var d,e=Array.prototype.slice,f="memory",g="handlers",h="runner",i="type";return a.create({displayName:"core/pubsub/hub",subscribe:c("on"),unsubscribe:c("off"),publish:function(a){var c=this,d={};d[i]=a,d[h]=b;var f=e.call(arguments);return f[0]=d,c.emit.apply(c,f)},peek:function(a,b){var c;return(c=this[g][a])!==d&&f in c?c[f]:b}})}),define("troopjs-core/component/registry",["../registry/component","../pubsub/hub"],function(a,b){return a.create(function(){var a=this;a.access(b.toString(),b),a.access(a.toString(),a)},{displayName:"core/component/registry"})}),define("troopjs-core/task/registry",["../registry/component","../component/registry"],function(a,b){return a.create(function(){var a=this;b.access(a.toString(),a)},{displayName:"core/task/registry"})}),define("troopjs-core/task/factory",["./registry","when"],function(a,b){var c="name",d="context",e="started",f="finished";return function(g,h){var i=b.isPromiseLike(g)?b(g):b.promise(g);i[d]=this,i[c]=h||"task",i[e]=new Date;var j=i[c]+"@"+i[e];return a.access(j,i),i.ensure(function(){i[f]=new Date,a.remove(j)})}}),define("troopjs-core/component/base",["../event/emitter","./runner/sequence","./signal/start","./signal/finalize","troopjs-compose/mixin/config","./registry","../task/factory","mu-merge","troopjs-compose/decorator/around","when","poly/array"],function(a,b,c,d,e,f,g,h,i,j){var k,l=!1,m=Array.prototype,n=m.push,o=m.slice,p="configuration",q="runner",r="handlers",s="head",t="tail",u="name",v="type",w="value",x="sig",y=x+"/setup",z=x+"/add",A=x+"/remove",B=x+"/teardown",C="on",D="one",E=new RegExp("^"+x+"/(.+)");return e.pragmas.push({pattern:/^(?:sig|one?)\/.+/,replace:"$&()"}),a.extend(function(){var a=this,b=a.constructor.specials[x]||m;b.forEach(function(b){a.on(b[u],b[w])}),a[p]={}},{displayName:"core/component/base","sig/initialize":function(){var a=this,b=a.constructor.specials;f.access(a.toString(),a);var c=j.map(b[C]||m,function(b){return a.on(b[v],b[w])}),d=j.map(b[D]||m,function(b){return a.one(b[v],b[w])});return j.join(c,d)},"sig/finalize":function(){var a=this;return f.remove(a.toString()),j.map(a[r].reverse(),function(b){return a.off(b[v])})},configure:function(){return h.apply(this[p],arguments)},on:i(function(a){return function(c,d,e){var f,g,h,i=this;return E.test(c)||((g=i[r][c])===k&&(g={},g[v]=c),f={},f[q]=b,s in g||(f[v]=y,h=i.emit(f,g,c,d,e)),h!==l&&(f[v]=z,h=i.emit(f,g,c,d,e)),h!==l&&i[r][c]!==g&&n.call(i[r],i[r][c]=g)),h!==l?a.call(i,c,d,e):i}}),off:i(function(a){return function(c,d){var e,f,g,h=this;return E.test(c)||((f=h[r][c])===k&&(f={},f[v]=c),e={},e[q]=b,e[v]=A,g=h.emit(e,f,c,d),g!==l&&f[s]===f[t]&&(e[v]=B,g=h.emit(e,f,c,d)),g!==l&&h[r][c]!==f&&n.call(h[r],h[r][c]=f)),g!==l?a.call(h,c,d):h}}),signal:function(a){var b=this,c=o.call(arguments);return c[0]="sig/"+a,b.emit.apply(b,c)},task:function(a,b){var c=this,d=g.call(c,a,b);return c.signal("task",d).yield(d)},start:c,stop:d})}),define("troopjs-core/component/runner/pipeline",["when"],function(a){var b,c=Function.prototype,d=c.apply,e=c.call,f=Object.prototype.toString,g="[object Arguments]",h="[object Array]",i=Array.prototype.slice,j="context",k="callback",l="head",m="next";return function(c,n,o){var p,q=c[j],r=c[k],s=[],t=0;for(p=n[l];p!==b;p=p[m])q!==b&&p[j]!==q||r!==b&&p[k]!==r||(s[t++]=p);return a.reduce(s,function(a,b){var c=f.call(a),i=c===h||c===g?d:e;return i.call(b,q,a)},o).then(function(a){var b=f.call(a);return b===h?a:b===g?i.call(a):[a]})}}),define("troopjs-core/component/gadget",["./base","./runner/pipeline","troopjs-compose/mixin/config","when","../pubsub/hub"],function(a,b,c,d,e){var f,g=null,h=Array.prototype,i="runner",j="context",k="callback",l="args",m="type",n="value",o="hub",p=new RegExp("^"+o+"/(.+)");return c.pragmas.push({pattern:/^hub(?::(memory))?\/(.+)/,replace:function(a,b,c){return o+'("'+c+'", '+!!b+")"}}),a.extend({displayName:"core/component/gadget","sig/initialize":function(){var a=this;return d.map(a.constructor.specials[o]||h,function(b){return a.subscribe(b[l][0],b[n])})},"sig/start":function(){var a=this,c={},e=a.constructor.specials[o]||h;return e=e.map(function(d){var e,f,g=d[l][0];return d[l][1]===!0&&(e=a.peek(g,c))!==c&&(f={},f[m]=o+"/"+g,f[i]=b,f[j]=a,f[k]=d[n],f=[f].concat(e)),f}).filter(function(a){return a!==f}),d.map(e,function(b){return a.emit.apply(a,b)})},"sig/add":function(a,b,c){var d,f,h=this;(d=p.exec(b))!==g&&(f={},f[j]=h,f[k]=c,e.subscribe(d[1],f))},"sig/remove":function(a,b,c){var d,f,h=this;(d=p.exec(b))!==g&&(f={},f[j]=h,f[k]=c,e.unsubscribe(d[1],f))},"sig/task":function(a){return this.publish("task",a)},publish:function(){return e.publish.apply(e,arguments)},subscribe:function(a,b,c){return this.on(o+"/"+a,b,c)},unsubscribe:function(a,b){return this.off(o+"/"+a,b)},peek:function(a,b){return e.peek(a,b)}})}),define("troopjs-core/component/service",["./gadget"],function(a){return a.extend({displayName:"core/component/service"})}),function(){function a(){function a(a){var b,d,e,f=[];for(a=a.replace(c.ws,"").replace(c.garbage,"");d=a.match(c.candidate);)a=a.replace(c.candidate,"").replace(c.garbage,""),f.push(d[0]);if(e=f.length,!e)return"*";for(b=0;e>b;b++)if(c.id.test(f[b]))return f[b];for(b=0;e>b;b++)if(c.cls.test(f[b]))return f[b];return f[0]}var b="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",c={ws:/(\s+)$/,garbage:/(\:.+?|\[.*?\])$/,id:new RegExp("^#"+b),cls:new RegExp("^\\."+b),candidate:new RegExp("([#\\.]{0,1}"+b+"?)$")};return a}if("function"==typeof define&&define.amd)define("mu-selector-set/src/classifier",[],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a()}}(),function(){function a(){function a(d){var e,f=0,g=!1,h=d.length;if(!h)return[];for(;d[f]&&(g||d[f]!==c);)d[f]===g?g=!1:g===!1&&-1!==b.indexOf(d[f])&&(g=d[f]),f++;return e=a(d.substr(f+1)),e.push(d.substr(0,f)),e}var b=["'",'"'],c=",";return a}if("function"==typeof define&&define.amd)define("mu-selector-set/src/splitter",[],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a()}}(),function(){function a(){function a(){this.lists={}}return a.prototype.add=function(a,b){return a+=" ",this.lists[a]=this.lists[a]||[],this.lists[a].push(b),this},a.prototype.remove=function(a,c,d){a+=" ",d=d||b;var e,f=this.lists[a];if(!f)return this;if(!c)return delete this.lists[a],this;for(e=f.length;e--;)d(c,f[e])&&f.splice(e,1);return this},a.prototype.get=function(a){return a+=" ",this.lists[a]||(this.lists[a]=[]),this.lists[a]},a}function b(a,b){return a===b}if("function"==typeof define&&define.amd)define("mu-selector-set/src/MappedLists",a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a()}}(this),function(){function a(a){function b(b,c,d){var e=new a;this.isOfType=function(a){return b.test(a)},this.extractElementKeys=c,this.add=function(a,b){return e.add(d?a.toLowerCase():a,b),this},this.remove=function(a,b,c){return e.remove(d?a.toLowerCase():a,b,c),this},this.get=function(a){return e.get(d?a.toLowerCase():a)}}return function(){var a=[];return a.push(new b(/^#.+$/,function(a){return a.id?["#"+a.id]:[]})),a.push(new b(/^\..+$/,function(a){var b=[],c=a.className;return"string"==typeof c?b=c.split(/\s+/):"object"==typeof c&&"baseVal"in c&&(b=c.baseVal.split(/\s+/)),b.map(function(a){return"."+a})})),a.push(new b(/^[^\*\.#].*$/,function(a){return a.nodeName?[a.nodeName]:[]},!0)),a.push(new b(/^\*$/,function(){return["*"]})),a}}if("function"==typeof define&&define.amd)define("mu-selector-set/src/Subsets",["./MappedLists"],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a(require("./MappedLists"))}}(),function(){function a(){function a(a){for(var b=this,c=b.document||b.ownerDocument,d=c.querySelectorAll(a),e=0;d[e]&&d[e]!==b;)e++;return d[e]?!0:!1}var b=window.document.documentElement,c=b.matches||b.matchesSelector||b.webkitMatchesSelector||b.mozMatchesSelector||b.oMatchesSelector||b.msMatchesSelector||a;return function(a,b){return c.call(a,b)}}if("function"==typeof define&&define.amd)define("mu-selector-set/src/matchesSelector",a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a()}}(),function(){function a(a,b,c,d){function e(){this.subsets=c()}function f(){var b,c,d,e=Array.prototype.slice.call(arguments);for(e[0]=e[0].trim(),d=a(e[0]),b=0;b<this.subsets.length;b++)if(c=this.subsets[b],c.isOfType(d))return void c.add(d,e)}function g(){function b(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]!==b[c])return!1;return!0}var c,d,e,f=Array.prototype.slice.call(arguments);for(f[0]=f[0].trim(),e=a(f[0]),c=0;c<this.subsets.length;c++)if(d=this.subsets[c],d.isOfType(e))return void d.remove(e,f,b)}return e.prototype.matchesSelector=d,e.prototype.add=function(a){for(var c=Array.prototype.slice.call(arguments),d=b(a),e=d.length;e--;)c.splice(0,1,d[e]),f.apply(this,c);return this},e.prototype.remove=function(a){for(var c=Array.prototype.slice.call(arguments),d=b(a),e=d.length;e--;)c.splice(0,1,d[e]),g.apply(this,c);return this},e.prototype.matches=function(){var a,b,c,d,e,f,g,h,i,j,k=[],l=Array.prototype.slice.call(arguments);for(l=Array.prototype.concat.apply([],l),d=0;d<l.length;d++)for(e=l[d],a=0;a<this.subsets.length;a++)for(f=this.subsets[a],h=f.extractElementKeys(e),b=0;b<h.length;b++)for(g=h[b],j=f.get(g),c=0;c<j.length;c++)i=j[c],-1===k.indexOf(i)&&this.matchesSelector(e,i[0])&&k.push(i);return k},e}if("function"==typeof define&&define.amd)define("mu-selector-set/src/SelectorSet",["./classifier","./splitter","./Subsets","./matchesSelector"],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a(require("./classifier"),require("./splitter"),require("./Subsets"),require("./matchesSelector"))}}(),function(){function a(a){return a}if("function"==typeof define&&define.amd)define("mu-selector-set/main",["./src/SelectorSet"],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a(require("./src/SelectorSet"))}}(),define("mu-selector-set",["mu-selector-set/main"],function(a){return a}),define("troopjs-dom/runner/sequence",["mu-selector-set","jquery","poly/array"],function(a,b){function c(a){return a[1]}var d,e=!1,f=0;return a.prototype.matchesSelector=b.find.matchesSelector,function(a,b,g){var h=d,i=b.direct,j=b.delegated,k=function(a,b){return l.isImmediatePropagationStopped()?a:(a===e&&(l.stopPropagation(),l.preventDefault()),b.apply(b.context,g))},l=g[0],m=l.delegateTarget,n=l.target,o=n.ownerDocument,p="click"!==l.type,q=n.nodeType!==d&&(l.button===f||p);do(n.disabled!==!0||p)&&(h=j.matches(l.currentTarget=n).map(c).reduce(k,h)),q=q&&!l.isPropagationStopped()&&n!==m&&null!==(n=n.parentNode)&&n!==o;while(q);return h!==e&&(h=i.reduce(k,h)),h}}),function(){function a(a){var b="destroy";a.event.special[b]={noBubble:!0,trigger:function(){return!1},remove:function(b){var c=this;b&&b.handler.call(c,a.Event(b.type,{data:b.data,namespace:b.namespace,target:c}))}}}if("function"==typeof define&&define.amd)define("mu-jquery-destroy/src/jQueryDestroy",["jquery"],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a(require("jquery"))}}(),function(){function a(a){return a}if("function"==typeof define&&define.amd)define("mu-jquery-destroy/main",["./src/jQueryDestroy"],a);else{if("object"!=typeof exports)throw Error("no module loader found");module.exports=a(require("./src/jQueryDestroy"))}}(),define("mu-jquery-destroy",["mu-jquery-destroy/main"],function(a){return a}),define("troopjs-dom/component",["troopjs-core/component/gadget","troopjs-core/component/runner/sequence","./runner/sequence","troopjs-compose/mixin/config","troopjs-compose/decorator/before","jquery","when","mu-selector-set","poly/array","mu-jquery-destroy"],function(a,b,c,d,e,f,g,h){function i(a,b){b[I].add(a[G],a)}function j(a,b){b[H].push(a)}function k(a,b){b[I].remove(a[G],a)}function l(a,b){var c=b[H],d=c.indexOf(a);-1!==d&&c.splice(d,1)}var m,n=null,o=Object.prototype.toString,p=Array.prototype,q=p.slice,r=p.push,s=f.fn,t=s.get,u=g.attempt,v="[object Function]",w="$element",x="proxy",y="dom",z="args",A="name",B="value",C="type",D="runner",E="context",F="callback",G="data",H="direct",I="delegated",J="on",K="off",L=new RegExp("^"+y+"/(.+)");return d.pragmas.push({pattern:/^dom(?::([^\/]+))?\/([^\(]+(?=$))/,replace:function(a,b,c){return y+"/"+c+(b===m?"()":'("'+b+'")')}}),a.extend(function(a,b){var c,d,e=this;if(a===m||a===n)throw new Error("No $element provided");return a.jquery?(c=a.get)!==t&&(d=q.call(arguments),d[0]=a=f(c.call(a,0))):(d=q.call(arguments),d[0]=a=f(a)),e[w]=a,b!==m&&(e.displayName=b),d},{displayName:"dom/component","sig/initialize":function(){var a=this;return g.map(a.constructor.specials[y]||p,function(b){return a.on(b[A],b[B],b[z][0])})},"sig/setup":function(a,b){var d,e=this;(d=L.exec(b))!==n&&(a[H]=[],a[I]=new h,e[w].on(d[1],n,e,a[x]=function(){var a={};return a[C]=b,a[D]=c,a[E]=e,a=[a],r.apply(a,arguments),e.emit.apply(e,a)}))},"sig/teardown":function(a,b){var c,d=this;(c=L.exec(b))!==n&&d[w].off(c[1],n,a[x])},"sig/task":function(a){this[w].trigger("task",[a])},on:e(function(a,b,c){var d=b;return L.test(a)&&(o.call(b)===v&&(d={},d[F]=b),d[J]=c!==m?i:j,d[K]=c!==m?k:l),[a,d,c]})},["html","text","before","after","append","prepend"].reduce(function(a,c){var d=s[c];return a[c]=function(a){var c=this;if(0===arguments.length)return d.call(c[w]);var e=q.call(arguments);return g(a,function(a){var f,g={};return g[D]=b,g[E]=c,g[C]="sig/render",o.call(a)===v?f=u.apply(c,e).then(function(a){return d.call(c[w],a),e[0]=g,c.emit.apply(c,e)}):(d.call(c[w],a),e[0]=g,f=c.emit.apply(c,e)),f})},a},{}))});